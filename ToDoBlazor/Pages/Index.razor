@page "/"
@using ToDoBlazor.Data
@using Microsoft.EntityFrameworkCore

<h1>Welcome to the ToDo App!</h1>


<table class="table table-dark table-striped">
    <thead>
        <tr>
            <th scope="col">ID</th>
            <th scope="col">Title</th>
            <th scope="col">Details</th>
            <th scope="col">Date Added</th>
            <th scope="col">Date Due</th>
            <th scope="col">Completed?</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in _items)
        {
        <tr>
            <td>@item.Key</td>
            <td>@item.Title</td>
            <td>@item.Details</td>
            <td>@item.Added</td>
            <td>@item.DueDate</td>
            <td>@item.isCompleted</td>
        </tr>
        }
    </tbody>
</table>

@code{
    [Inject] ApplicationDbContext _db { get; set; }
    private List<ToDoItem> _items = new List<ToDoItem>();

    protected override async Task OnInitializedAsync()
    {
        _items = await _db.ToDoItems.ToListAsync();
    }
}